{"version":3,"sources":["js/utils/Range.js"],"names":["clamp","num","min","max","defaultConfig","transitionDuration","onUpdate","Range","el","config","mergedConfig","trDur","fill","document","createElement","setAttribute","style","position","overflow","appendChild","isSeeking","update","v","callback","pct","value","transform","set","obj","forEach","k","getValue","e","getBoundingClientRect","left","width","clientX","disableTransition","mouseMoveHandler","transition","mouseUpHandler","window","removeEventListener","onmousedown","button","addEventListener"],"mappings":";AA6FC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAAA,IAAA,EAAA,EAAA,QAAA,+CAAA,EAAA,EAAA,QAAA,gDAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA7FD,IAAMA,EAAQ,SAACC,EAAKC,EAAKC,GAASF,OAAAA,GAAOC,EAAMA,EAAMD,GAAOE,EAAMA,EAAMF,GAElEG,EAAgB,CACpBF,IAAK,EACLC,IAAK,IACLE,mBAAoB,IACpBC,SAAU,cAGG,SAASC,EAAMC,GAAiB,IAAA,EAAA,KAAbC,EAAS,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GACnCC,GAAoBN,EAAAA,EAAAA,SAAAA,GAAAA,EAAkBK,GAChBE,EAAUD,EAA9BL,mBAYFO,EAAOC,SAASC,cAAc,OACpCF,EAAKG,aAAa,cAAc,GAChCH,EAAKG,aAAa,QAZlB,qKAaAP,EAAGQ,MAAMC,SAAW,WACpBT,EAAGQ,MAAME,SAAW,SACpBV,EAAGW,YAAYP,GAEVQ,KAAAA,WAAY,EAEZC,KAAAA,OAAS,SAACC,EAAGC,GAEVC,IAAAA,GAAQF,EAAI,EAAKpB,MAAQ,EAAKC,IAAM,EAAKD,KAAQ,IACvD,EAAKuB,MAAQH,EACbV,EAAKI,MAAMU,UAA0BF,cAAAA,OAAAA,EAArC,MACID,GAAUA,EAASD,IAGpBK,KAAAA,IAAM,SAAAC,IACGA,EAAAA,EAAAA,SAAAA,GAAKC,QAAQ,SAAAC,GACvB,EAAKA,GAAKF,EAAIE,KAGhB,EAAKT,OAAOrB,EAAM,EAAKyB,MAAO,EAAKvB,IAAK,EAAKC,OAG1CwB,KAAAA,IAAIjB,GAEJU,KAAAA,WAAY,EACZK,KAAAA,MAAQhB,EAAOgB,OAAS,KAAKvB,IAE5B6B,IAAAA,EAAW,SAAAC,GACSxB,IAAAA,EAAAA,EAAGyB,wBAAnBC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,MACVX,GAAQQ,EAAEI,QAAUF,GAAQC,EAAS,IAGjCX,OAFRA,EAAMxB,EAAMwB,EAAK,EAAG,MAEN,KAAQ,EAAKrB,IAAM,EAAKD,KAAO,EAAKA,KAGhDmC,GAAoB,EAElBC,EAAmB,SAAAN,GACvB,EAAKX,OAAOU,EAASC,GAAI,EAAK1B,UAEzB+B,IACHzB,EAAKI,MAAMuB,WAAa,gBACxBF,GAAoB,IAIlBG,EAAiB,WACrBH,GAAoB,EACpBzB,EAAKI,MAAMuB,WAAa,gBACxB,EAAKnB,WAAY,EACjBqB,OAAOC,oBAAoB,YAAaJ,IAgBnC,OAbP9B,EAAGmC,YAAc,SAAAX,GAEE,IAAbA,EAAEY,SAINhC,EAAKI,MAAMuB,WAA0B5B,aAAAA,OAAAA,EAArC,MACA,EAAKS,WAAY,EACjB,EAAKC,OAAOU,EAASC,GAAI,EAAK1B,UAC9BmC,OAAOI,iBAAiB,YAAaP,GACrCG,OAAOI,iBAAiB,UAAWL,KAG9B","file":"Range.a7e81ef6.js","sourceRoot":"..","sourcesContent":["const clamp = (num, min, max) => (num <= min ? min : num >= max ? max : num);\r\n\r\nconst defaultConfig = {\r\n  min: 0,\r\n  max: 100,\r\n  transitionDuration: 250,\r\n  onUpdate: () => {}\r\n};\r\n\r\nexport default function Range(el, config = {}) {\r\n  const mergedConfig = { ...defaultConfig, ...config };\r\n  const { transitionDuration: trDur } = mergedConfig;\r\n\r\n  const fillStyle = `\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n    top: 0;\r\n    left: -100%;\r\n    transform: translateX(0%);\r\n    transition: transform 0ms;\r\n  `;\r\n\r\n  const fill = document.createElement('div');\r\n  fill.setAttribute('data-range', true);\r\n  fill.setAttribute('style', fillStyle);\r\n  el.style.position = 'relative';\r\n  el.style.overflow = 'hidden';\r\n  el.appendChild(fill);\r\n\r\n  this.isSeeking = false;\r\n\r\n  this.update = (v, callback) => {\r\n    // console.log(this);\r\n    const pct = ((v - this.min) / (this.max - this.min)) * 100;\r\n    this.value = v;\r\n    fill.style.transform = `translateX(${pct}%)`;\r\n    if (callback) callback(v);\r\n  };\r\n\r\n  this.set = obj => {\r\n    Object.keys(obj).forEach(k => {\r\n      this[k] = obj[k];\r\n    });\r\n\r\n    this.update(clamp(this.value, this.min, this.max));\r\n  };\r\n\r\n  this.set(mergedConfig);\r\n\r\n  this.isSeeking = false;\r\n  this.value = config.value || this.min;\r\n\r\n  const getValue = e => {\r\n    const { left, width } = el.getBoundingClientRect();\r\n    let pct = ((e.clientX - left) / width) * 100;\r\n    pct = clamp(pct, 0, 100);\r\n\r\n    return (pct / 100) * (this.max - this.min) + this.min;\r\n  };\r\n\r\n  let disableTransition = false;\r\n\r\n  const mouseMoveHandler = e => {\r\n    this.update(getValue(e), this.onUpdate);\r\n\r\n    if (!disableTransition) {\r\n      fill.style.transition = 'transform 0ms';\r\n      disableTransition = true;\r\n    }\r\n  };\r\n\r\n  const mouseUpHandler = () => {\r\n    disableTransition = false;\r\n    fill.style.transition = 'transform 0ms';\r\n    this.isSeeking = false;\r\n    window.removeEventListener('mousemove', mouseMoveHandler);\r\n  };\r\n\r\n  el.onmousedown = e => {\r\n    // left button only\r\n    if (e.button !== 0) {\r\n      return;\r\n    }\r\n\r\n    fill.style.transition = `transform ${trDur}ms`;\r\n    this.isSeeking = true;\r\n    this.update(getValue(e), this.onUpdate);\r\n    window.addEventListener('mousemove', mouseMoveHandler);\r\n    window.addEventListener('mouseup', mouseUpHandler);\r\n  };\r\n\r\n  return this;\r\n}\r\n"]}