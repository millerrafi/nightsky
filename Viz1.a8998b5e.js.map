{"version":3,"sources":["node_modules/three-orbitcontrols/OrbitControls.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/bundle-loader.js","js/three/Viz1.js","node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","require","loadBundlesLazy","bundles","Array","isArray","id","length","Promise","resolve","code","LazyPromise","reject","loadBundles","slice","then","all","map","loadBundle","bundleLoaders","registerBundleLoader","type","loader","module","load","register","bundle","substring","lastIndexOf","toLowerCase","bundleLoader","resolved","catch","e","executor","promise","prototype","onSuccess","onError","Viz","index","c1","document","getElementById","container1","parentNode","BCR1","getBoundingClientRect","WIDTH","width","HEIGHT","height","ASPECT","renderer1","THREE","WebGLRenderer","antialias","canvas","camera1","PerspectiveCamera","position","set","scene","Scene","background","Color","add","setSize","controls1","OrbitControls","enabled","addEventListener","constellations","starField","rotation","z","EARTH_TILT","DEG","makeStarField","sunMap","TextureLoader","images","sunMaterial","SpriteMaterial","depthWrite","sun","Sprite","scale","SUN_RADIUS","earth","Mesh","SphereGeometry","EARTH_RADIUS","invert","northPole","CylinderGeometry","MeshBasicMaterial","color","earthTilt","Group","rotateOnWorldAxis","Vector3","moon","MOON_RADIUS","moonOrbit","TorusGeometry","MOON_DISTANCE","PALETTE","MOON","x","Math","PI","moonTilt","normalize","groupEarthMoon","earthOrbit","EARTH_DISTANCE","ECLIPTIC","side","DoubleSide","light","DirectionalLight","targetObject","Object3D","target","gridXZ","GridHelper","update","positions","hide","sunLong","Sun","longitude","moonLong","Moon","visible","grid","orbits","stars","sin","cos","y","Earth","rotationAngle","lookAt","rotateY","render","onResize","aspect","updateProjectionMatrix","script","createElement","async","charset","src","onerror","onload","getElementsByTagName","appendChild"],"mappings":"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","file":"Viz1.a8998b5e.js","sourceRoot":"..","sourcesContent":["/* three-orbitcontrols addendum */ var THREE = require('three');\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.LEFT, MIDDLE: THREE.MOUSE.MIDDLE, RIGHT: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t// console.log( 'handleKeyDown' );\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.MIDDLE:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.RIGHT:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n/* three-orbitcontrols addendum */ module.exports = exports.default = THREE.OrbitControls;\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","import {\r\n  DEG,\r\n  EARTH_DISTANCE,\r\n  EARTH_RADIUS,\r\n  EARTH_TILT,\r\n  MOON_DISTANCE,\r\n  MOON_RADIUS,\r\n  SUN_RADIUS,\r\n  PALETTE\r\n} from '../constants.js';\r\nimport makeConstellationLines from './makeConstellationLines.js';\r\n// import makeStarField from '/js/three/starField.js';\r\n\r\nimport LambertTextureMaterial from './LambertTextureMaterial.js';\r\n\r\nimport * as THREE from 'three';\r\nimport OrbitControls from 'three-orbitcontrols';\r\n\r\nimport images from '../images';\r\n\r\nexport default function Viz(index) {\r\n  const c1 = document.getElementById(`c${index}`);\r\n  const container1 = c1.parentNode;\r\n  const BCR1 = container1.getBoundingClientRect();\r\n\r\n  // Set the scene size.\r\n  const WIDTH = BCR1.width;\r\n  const HEIGHT = BCR1.height;\r\n\r\n  // Set some camera attributes.\r\n  const VIEW_ANGLE = 15;\r\n  const ASPECT = WIDTH / HEIGHT;\r\n  const NEAR = 0.1;\r\n  const FAR = 10000;\r\n\r\n  // Create a WebGL renderer, camera\r\n  // and a scene\r\n  const renderer1 = new THREE.WebGLRenderer({\r\n    antialias: true,\r\n    canvas: c1\r\n  });\r\n\r\n  const camera1 = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);\r\n\r\n  camera1.position.set(0, 150, 400);\r\n\r\n  const scene = new THREE.Scene();\r\n\r\n  scene.background = new THREE.Color(0x111111);\r\n\r\n  // Add the camera to the scene.\r\n  scene.add(camera1);\r\n\r\n  // Start the renderer.\r\n  renderer1.setSize(WIDTH, HEIGHT);\r\n\r\n  // Attach the renderer-supplied\r\n  // DOM element.\r\n\r\n  var controls1 = new OrbitControls(camera1, container1);\r\n  controls1.enabled = false;\r\n\r\n  c1.addEventListener('mouseenter', () => {\r\n    controls1.enabled = true;\r\n  });\r\n  c1.addEventListener('mouseleave', () => {\r\n    controls1.enabled = false;\r\n  });\r\n\r\n  const constellations = makeConstellationLines(camera1.position.length());\r\n  constellations.rotation.z = -EARTH_TILT * DEG;\r\n  scene.add(constellations);\r\n\r\n  let starField;\r\n\r\n  import('/js/three/starField.js').then(({ makeStarField }) => {\r\n    starField = makeStarField(camera1.position.length());\r\n    starField.rotation.z = -EARTH_TILT * DEG;\r\n    scene.add(starField);\r\n  });\r\n\r\n  var sunMap = new THREE.TextureLoader().load(images['sun.png']);\r\n  var sunMaterial = new THREE.SpriteMaterial({\r\n    map: sunMap,\r\n    depthWrite: false\r\n  });\r\n  var sun = new THREE.Sprite(sunMaterial);\r\n  sun.scale.set(SUN_RADIUS * 4, SUN_RADIUS * 4, 1);\r\n  scene.add(sun);\r\n\r\n  var earth = new THREE.Mesh(\r\n    new THREE.SphereGeometry(EARTH_RADIUS, 30, 30),\r\n    LambertTextureMaterial(images['earth-day.jpg'], images['earth-night.jpg'], {\r\n      invert: true\r\n    })\r\n  );\r\n  scene.add(earth);\r\n\r\n  const northPole = new THREE.Mesh(\r\n    new THREE.CylinderGeometry(0.1, 0.1, 20, 8),\r\n    new THREE.MeshBasicMaterial({ color: 0xffffff })\r\n  );\r\n  scene.add(northPole);\r\n\r\n  const earthTilt = new THREE.Group();\r\n  earthTilt.add(earth);\r\n  earthTilt.add(northPole);\r\n  earthTilt.rotateOnWorldAxis(new THREE.Vector3(0, 0, 1), -EARTH_TILT * DEG);\r\n\r\n  var moon = new THREE.Mesh(\r\n    new THREE.SphereGeometry(MOON_RADIUS, 30, 30),\r\n    LambertTextureMaterial(images['moon-day.jpg'], images['moon-night.jpg'], {\r\n      invert: true\r\n    })\r\n  );\r\n\r\n  var moonOrbit = new THREE.Mesh(\r\n    new THREE.TorusGeometry(MOON_DISTANCE, 0.1, 16, 100),\r\n    new THREE.MeshBasicMaterial({\r\n      color: PALETTE.MOON\r\n    })\r\n  );\r\n\r\n  moonOrbit.rotation.x = Math.PI / 2;\r\n\r\n  const moonTilt = new THREE.Group();\r\n  moonTilt.add(moon);\r\n  moonTilt.add(moonOrbit);\r\n  moonTilt.rotateOnWorldAxis(new THREE.Vector3(1, 0, 1).normalize(), 5.1 * DEG);\r\n\r\n  var groupEarthMoon = new THREE.Group();\r\n  groupEarthMoon.add(earthTilt);\r\n  groupEarthMoon.add(moonTilt);\r\n  scene.add(groupEarthMoon);\r\n\r\n  var earthOrbit = new THREE.Mesh(\r\n    new THREE.TorusGeometry(EARTH_DISTANCE, 0.1, 16, 100),\r\n    new THREE.MeshBasicMaterial({\r\n      color: PALETTE.ECLIPTIC,\r\n      side: THREE.DoubleSide\r\n    })\r\n  );\r\n  earthOrbit.rotation.x = Math.PI / 2;\r\n  scene.add(earthOrbit);\r\n\r\n  var light = new THREE.DirectionalLight(0xffffff, 1);\r\n  var targetObject = new THREE.Object3D();\r\n  targetObject.position.set(0, 0, 0);\r\n  scene.add(targetObject);\r\n\r\n  light.target = groupEarthMoon;\r\n  light.position.set(0, 0, 0);\r\n  scene.add(light);\r\n\r\n  var gridXZ = new THREE.GridHelper(100, 10, 0x666666, 0x333333);\r\n  gridXZ.position.set(0, -SUN_RADIUS, 0);\r\n  scene.add(gridXZ);\r\n\r\n  // var gridXY = new THREE.GridHelper(100, 10, 0x666666, 0x333333);\r\n  // gridXY.position.set(0, 0, -50);\r\n  // gridXY.rotation.x = Math.PI / 2;\r\n  // scene.add(gridXY);\r\n\r\n  // var gridYZ = new THREE.GridHelper(100, 10, 0x666666, 0x333333);\r\n  // gridYZ.position.set(-50, 0, 0);\r\n  // gridYZ.rotation.z = Math.PI / 2;\r\n  // scene.add(gridYZ);\r\n\r\n  return {\r\n    update({ positions, hide }) {\r\n      const sunLong = positions.Sun.longitude * DEG + Math.PI;\r\n      const moonLong = positions.Moon.longitude * DEG;\r\n\r\n      gridXZ.visible = !hide.grid;\r\n      constellations.visible = !hide.constellations;\r\n      moonOrbit.visible = !hide.orbits;\r\n      earthOrbit.visible = !hide.orbits;\r\n      if (starField) starField.visible = !hide.stars;\r\n\r\n      groupEarthMoon.position.x = EARTH_DISTANCE * Math.sin(sunLong);\r\n      groupEarthMoon.position.z = EARTH_DISTANCE * Math.cos(sunLong);\r\n      earth.rotation.y = positions.Earth.rotationAngle * DEG + Math.PI * 1.5;\r\n\r\n      // light.target = groupEarthMoon;\r\n      // light.position.set(groupEarthMoon.position);\r\n\r\n      moon.position.x = MOON_DISTANCE * Math.sin(moonLong);\r\n      moon.position.z = MOON_DISTANCE * Math.cos(moonLong);\r\n      moon.lookAt(groupEarthMoon.position);\r\n      moon.rotateY(-Math.PI / 2);\r\n\r\n      renderer1.render(scene, camera1);\r\n\r\n      // required if controls.enableDamping or controls.autoRotate are set to true\r\n      controls1.update();\r\n    },\r\n\r\n    onResize() {\r\n      const BCR1 = container1.getBoundingClientRect();\r\n\r\n      // Set the scene size.\r\n      const WIDTH = BCR1.width;\r\n      const HEIGHT = BCR1.height;\r\n\r\n      camera1.aspect = WIDTH / HEIGHT;\r\n      camera1.updateProjectionMatrix();\r\n\r\n      renderer1.setSize(WIDTH, HEIGHT);\r\n    }\r\n  };\r\n}\r\n","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}